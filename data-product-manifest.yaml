---
version: 0.1.0
alias: SCD2_testing_manifest_changes_Test_13_June_Test4
discoveryPort:
  name: SCD2 changes implementation Verification csv 13 June Test 5
  shortDescription: Weather Forecast of the next 7 days for ahmedabad city
  longDescription: Weather Forecast of the next 7 days for ahmedabad city along with the accuracy of the previous forecast
  tags:
    - Madrid
    - House Rental
  domain: ['Finance']
  function: ['Forecast']
  regulatoryFields:
    dataPrivacy: public
    customerInfo: nonPII
    dataOrigin: machineGenerated
    monetaryInfo: nonFinancialData
inputPorts:
  - alias: Test0001_input_port
    description: scdcheck
    type: s3-csv
    tags: []
    syncType: pull
    connectionUrn: urn:dv:connection:e6256cc3-386f-4a45-8c6e-5c32ea4287ca
    dataSet:
      path: s3://dataverse-byte/sample-data/inputData/demo/demo_update2.csv
      advanceOptions:
        delimiter: ','
        header: true
        inferSchema: true
        dateFormat: 'yyyy-dd-MM'
        multiline: true
      filter: ""
      projection:
        - id
        - name
        - marks
        - modified
productState:
  updateType: 'scheduled'
  updateSchedule: "*/02 * * * *"
  updateStrategy: scd2
  logicalSchema:
    properties:
      id:
        type: number
      name:
        type: String
      marks:
        type: number
      modified:
        type: datetime
  updateStrategyOptions:
    uniqueKeyColumns:
        - id
    changeTrackingColumns:
        - marks
    timeTrackingColumn: modified
transformation:
  - alias: Test0001_input_port_trans
    description: step_1
    type: sql
    sequenceNo: 1
    stepName: one
    query: SELECT * FROM Test0001_input_port
    references:
      - alias: Test0001_input_port
        sqlReference: Test0001_input_port
outputPort:
  subscriptionChannels:
    - channelType: rest-api
      queryType: sql
controlPort:
  dataQualityRules:
    RecordCountCheck:
      inputPort:
        - referenceAlias: Test0001_input_port
          expression: ">="
          number: 100
      productState:
        referenceAlias: Test0001_input_port
        expression: ==
        number: 100
